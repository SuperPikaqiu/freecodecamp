!function(n){function o(o){for(var t,a,d=o[0],l=o[1],u=o[2],f=0,s=[];f<d.length;f++)a=d[f],e[a]&&s.push(e[a][0]),e[a]=0;for(t in l)Object.prototype.hasOwnProperty.call(l,t)&&(n[t]=l[t]);for(c&&c(o);s.length;)s.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var n,o=0;o<i.length;o++){for(var r=i[o],t=!0,d=1;d<r.length;d++){var l=r[d];0!==e[l]&&(t=!1)}t&&(i.splice(o--,1),n=a(a.s=r[0]))}return n}var t={},e={0:0},i=[];function a(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=n,a.c=t,a.d=function(n,o,r){a.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:r})},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,o){if(1&o&&(n=a(n)),8&o)return n;if(4&o&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&o&&"string"!=typeof n)for(var t in n)a.d(r,t,function(o){return n[o]}.bind(null,t));return r},a.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(o,"a",o),o},a.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},a.p="";var d=window.webpackJsonp=window.webpackJsonp||[],l=d.push.bind(d);d.push=o,d=d.slice();for(var u=0;u<d.length;u++)o(d[u]);var c=l;i.push([4,1]),r()}({13:function(n,o,r){var t=r(14);"string"==typeof t&&(t=[[n.i,t,""]]);var e={hmr:!0,transform:void 0,insertInto:void 0};r(3)(t,e);t.locals&&(n.exports=t.locals)},14:function(n,o,r){(n.exports=r(1)(!1)).push([n.i,".box {\n  background-color: #000;\n  padding: 5px;\n  width: 500px;\n  height: 500px;\n  margin: 20px auto;\n  position: relative; }\n  .box ul {\n    list-style: none;\n    height: 100%;\n    padding: 0;\n    margin: 0;\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n    align-content: center; }\n  .box li {\n    display: inline-block;\n    width: 160px;\n    height: 160px;\n    text-align: center;\n    line-height: 160px;\n    font-size: 30px;\n    color: #fff; }\n\n.right-bottom {\n  border-right: 2px solid #e1e100 !important;\n  border-bottom: 2px solid #e1e100 !important; }\n\n.bottom {\n  border-bottom: 2px solid #e1e100 !important; }\n\n.right {\n  border-right: 2px solid #e1e100 !important; }\n\n.modal-footer {\n  border-top: 0; }\n\n.choicePanel {\n  padding: 5px;\n  background-color: #000000; }\n  .choicePanel h2 {\n    color: #fff;\n    text-align: center; }\n  .choicePanel hr {\n    border-top: 2px solid #e1e100; }\n  .choicePanel span {\n    display: inline-block;\n    width: 100%;\n    color: #fff;\n    text-align: center;\n    margin-bottom: 15px; }\n\n#winCanvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1; }\n\n#roleSelect {\n  display: block;\n  width: 200px;\n  margin: 20px auto;\n  background-color: #00b3ee;\n  font-size: 24px;\n  color: white; }\n",""])},4:function(n,o,r){"use strict";(function(n){var o=function(){return function(n,o){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,o){var r=[],t=!0,e=!1,i=void 0;try{for(var a,d=n[Symbol.iterator]();!(t=(a=d.next()).done)&&(r.push(a.value),!o||r.length!==o);t=!0);}catch(n){e=!0,i=n}finally{try{!t&&d.return&&d.return()}finally{if(e)throw i}}return r}(n,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r(5),r(13),r(15),r(16),n(document).ready(function(){var r={board:[],player:"",computer:"",status:"",pointArr:[[90,90],[250,90],[410,90],[90,250],[250,250],[410,250],[90,410],[250,410],[410,410]],timeIns:null};function t(){for(var n=!1,o=0;o<9;o++)if(void 0===r.board[o]){r.board[o]=r.computer;var t=i();if(t)return a(),d(t),void(r.status="finish");r.board[o]=void 0}for(o=0;o<9;o++)if(void 0===r.board[o]){if(r.board[o]=r.player,i()){r.board[o]=r.computer,n=!0;break}r.board[o]=void 0}if(!n)for(o=0;o<9;o++)if(void 0===r.board[o]){r.board[o]=r.computer;for(var u=0,c=0;c<9;c++)void 0===r.board[c]&&(r.board[c]=r.computer,i()&&u++,r.board[c]=void 0);if(u>=2){n=!0;break}r.board[o]=void 0}n||void 0===r.board[4]&&(r.board[4]=r.computer,n=!0);var f=[0,2,6,8];if(!n)for(o=0;o<f.length;o++)if(void 0===r.board[f[o]]){r.board[f[o]]=r.computer,n=!0;break}if(!n)for(o=0;o<9;o++)if(void 0===r.board[o]){r.board[o]=r.computer,n=!0;break}a(),e()?(r.status="finish",window.setTimeout(l,1e3)):r.status="player"}function e(){for(var n=0,o=0;o<9;o++)void 0!==r.board[o]&&n++;return 9==n}function i(){for(var n=0;n<3;n++)if(void 0!==r.board[3*n]&&r.board[3*n]==r.board[3*n+1]&&r.board[3*n+1]==r.board[3*n+2])return[3*n,3*n+2];for(n=0;n<3;n++)if(void 0!==r.board[n]&&r.board[n]==r.board[n+3]&&r.board[n+3]==r.board[n+6])return[n,n+6];return void 0!==r.board[0]&&r.board[0]==r.board[4]&&r.board[0]==r.board[8]?[0,8]:void 0!==r.board[2]&&r.board[2]==r.board[4]&&r.board[2]==r.board[6]&&[6,2]}function a(){for(var o=n("li"),t=0;t<9;t++)void 0!==r.board[t]?n(o[t]).text(r.board[t]):n(o[t]).text("")}function d(t){var e=0;n("#winCanvas").show(),r.timeIns=window.setInterval(function(){var n=document.getElementById("winCanvas").getContext("2d"),i=o(r.pointArr[t[0]],2),a=i[0],d=i[1],u=o(r.pointArr[t[1]],2),c=u[0],f=u[1];a==c&&(d-=40,f+=40),d==f&&(a-=40,c+=40),a<c&&d<f&&(a-=40,d-=40,c+=40,f+=40),a<c&&d>f&&(a-=40,d+=40,c+=40,f-=40),n.clearRect(0,0,500,500),n.strokeStyle="#ff6000",n.lineWidth=3,e%2==0&&(n.beginPath(),n.moveTo(a,d),n.lineTo(c,f),n.closePath(),n.stroke()),++e>=6&&l()},1e3)}function l(){r.board=[],null!=r.timeIns&&window.clearInterval(r.timeIns),r.timeIns=null,"X"==r.player?r.status="player":(r.status="computer",window.setTimeout(t,1e3)),n("#winCanvas").hide(),a()}n("li").on("click",function(){if("player"==r.status){var o=n(this).attr("id");if(void 0===r.board[o]){r.board[o]=r.player,a();var u=i();u?(d(u),r.status="finish"):e()?(r.status="finish",window.setTimeout(l,1e3)):(r.status="computer",window.setTimeout(t,1e3))}}}),n("#btnO").on("click",function(){r.player="O",r.computer="X",n("#myModal").modal("hide")}),n("#btnX").on("click",function(){r.player="X",r.computer="O",n("#myModal").modal("hide")}),n("#roleSelect").on("click",function(){null!=r.timeIns&&window.clearInterval(r.timeIns)}),n("#myModal").on("hidden.bs.modal",function(){l()}),n("#myModal").on("show.bs.modal",function(){r.status="modal"}),n("#myModal").modal({backdrop:"static"})})}).call(this,r(0))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcHJvamVjdC90aWMtdGFjLXRvZS9pbmRleC5zY3NzPzdjZWMiLCJ3ZWJwYWNrOi8vLy4vcHJvamVjdC90aWMtdGFjLXRvZS9pbmRleC5zY3NzIiwid2VicGFjazovLy8uL3Byb2plY3QvdGljLXRhYy10b2UvaW5kZXguanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIwIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJjb250ZW50Iiwib3B0aW9ucyIsImhtciIsInRyYW5zZm9ybSIsImluc2VydEludG8iLCJ1bmRlZmluZWQiLCJsb2NhbHMiLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImJvYXJkIiwicGxheWVyIiwiY29tcHV0ZXIiLCJzdGF0dXMiLCJwb2ludEFyciIsInRpbWVJbnMiLCJjb21wdXRlck1vdmUiLCJtb3ZlRmxhZyIsIndpbkFyciIsImlzV2luIiwiZHJhd0JvYXJkIiwiZHJhd0xpbmUiLCJjb3VudCIsImFyciIsImlzRmluaXNoIiwic2V0VGltZW91dCIsImluaXRpYWxCb2FyZCIsImxpc3QiLCJ0ZXh0Iiwic2hvdyIsInNldEludGVydmFsIiwiY3h0IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiX2RhdGEkcG9pbnRBcnIkYXJyJCIsIl9zbGljZWRUb0FycmF5IiwieDEiLCJ5MSIsIl9kYXRhJHBvaW50QXJyJGFyciQyIiwieDIiLCJ5MiIsImNsZWFyUmVjdCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwiY2xvc2VQYXRoIiwic3Ryb2tlIiwiY2xlYXJJbnRlcnZhbCIsImhpZGUiLCJvbiIsImluZGV4IiwidGhpcyIsImF0dHIiLCJtb2RhbCIsImJhY2tkcm9wIl0sIm1hcHBpbmdzIjoiYUFDQSxTQUFBQSxFQUFBQyxHQVFBLElBUEEsSUFNQUMsRUFBQUMsRUFOQUMsRUFBQUgsRUFBQSxHQUNBSSxFQUFBSixFQUFBLEdBQ0FLLEVBQUFMLEVBQUEsR0FJQU0sRUFBQSxFQUFBQyxLQUNRRCxFQUFBSCxFQUFBSyxPQUFvQkYsSUFDNUJKLEVBQUFDLEVBQUFHLEdBQ0FHLEVBQUFQLElBQ0FLLEVBQUFHLEtBQUFELEVBQUFQLEdBQUEsSUFFQU8sRUFBQVAsR0FBQSxFQUVBLElBQUFELEtBQUFHLEVBQ0FPLE9BQUFDLFVBQUFDLGVBQUFDLEtBQUFWLEVBQUFILEtBQ0FjLEVBQUFkLEdBQUFHLEVBQUFILElBS0EsSUFGQWUsS0FBQWhCLEdBRUFPLEVBQUFDLFFBQ0FELEVBQUFVLE9BQUFWLEdBT0EsT0FIQVcsRUFBQVIsS0FBQVMsTUFB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QUN6QlMsSUFFQSxJQUFJRixFQUFTQyxJQUNURCxHQUNBRyxFQUFTSCxHQUVUaEYsRUFBSzJFLE9BQVMsVUFFVlcsS0FDQXRGLEVBQUsyRSxPQUFTLFNBQ2RoQixPQUFPNEIsV0FBV0MsRUFBYyxPQUVoQ3hGLEVBQUsyRSxPQUFTLFdBQ2RoQixPQUFPNEIsV0FBV1QsRUFBYyxVQU9wRFQsRUFBRSxTQUFTNEMsR0FBRyxRQUFTLFdBQ25CakgsRUFBS3lFLE9BQVMsSUFDZHpFLEVBQUswRSxTQUFXLElBQ2hCTCxFQUFFLFlBQVlnRCxNQUFNLFVBR3hCaEQsRUFBRSxTQUFTNEMsR0FBRyxRQUFTLFdBQ25CakgsRUFBS3lFLE9BQVMsSUFDZHpFLEVBQUswRSxTQUFXLElBQ2hCTCxFQUFFLFlBQVlnRCxNQUFNLFVBZ1B4QmhELEVBQUUsZUFBZTRDLEdBQUcsUUFBUyxXQUNMLE1BQWhCakgsRUFBSzZFLFNBQ0xsQixPQUFPb0QsY0FBYy9HLEVBQUs2RSxXQUlsQ1IsRUFBRSxZQUFZNEMsR0FBRyxrQkFBbUIsV0FDaEN6QixNQUdKbkIsRUFBRSxZQUFZNEMsR0FBRyxnQkFBaUIsV0FDOUJqSCxFQUFLMkUsT0FBUyxVQUdsQk4sRUFBRSxZQUFZZ0QsT0FDVkMsU0FBVSIsImZpbGUiOiJ0aWMtdGFjLXRvZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQwOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFs0LDFdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vaW5kZXguc2Nzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9pbmRleC5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9pbmRleC5zY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYm94IHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XFxuICBwYWRkaW5nOiA1cHg7XFxuICB3aWR0aDogNTAwcHg7XFxuICBoZWlnaHQ6IDUwMHB4O1xcbiAgbWFyZ2luOiAyMHB4IGF1dG87XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7IH1cXG4gIC5ib3ggdWwge1xcbiAgICBsaXN0LXN0eWxlOiBub25lO1xcbiAgICBoZWlnaHQ6IDEwMCU7XFxuICAgIHBhZGRpbmc6IDA7XFxuICAgIG1hcmdpbjogMDtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICAgIGZsZXgtd3JhcDogd3JhcDtcXG4gICAgYWxpZ24tY29udGVudDogY2VudGVyOyB9XFxuICAuYm94IGxpIHtcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgICB3aWR0aDogMTYwcHg7XFxuICAgIGhlaWdodDogMTYwcHg7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgbGluZS1oZWlnaHQ6IDE2MHB4O1xcbiAgICBmb250LXNpemU6IDMwcHg7XFxuICAgIGNvbG9yOiAjZmZmOyB9XFxuXFxuLnJpZ2h0LWJvdHRvbSB7XFxuICBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCAjZTFlMTAwICFpbXBvcnRhbnQ7XFxuICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2UxZTEwMCAhaW1wb3J0YW50OyB9XFxuXFxuLmJvdHRvbSB7XFxuICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2UxZTEwMCAhaW1wb3J0YW50OyB9XFxuXFxuLnJpZ2h0IHtcXG4gIGJvcmRlci1yaWdodDogMnB4IHNvbGlkICNlMWUxMDAgIWltcG9ydGFudDsgfVxcblxcbi5tb2RhbC1mb290ZXIge1xcbiAgYm9yZGVyLXRvcDogMDsgfVxcblxcbi5jaG9pY2VQYW5lbCB7XFxuICBwYWRkaW5nOiA1cHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwOyB9XFxuICAuY2hvaWNlUGFuZWwgaDIge1xcbiAgICBjb2xvcjogI2ZmZjtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyOyB9XFxuICAuY2hvaWNlUGFuZWwgaHIge1xcbiAgICBib3JkZXItdG9wOiAycHggc29saWQgI2UxZTEwMDsgfVxcbiAgLmNob2ljZVBhbmVsIHNwYW4ge1xcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBjb2xvcjogI2ZmZjtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4OyB9XFxuXFxuI3dpbkNhbnZhcyB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDA7XFxuICBsZWZ0OiAwO1xcbiAgei1pbmRleDogMTsgfVxcblxcbiNyb2xlU2VsZWN0IHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgd2lkdGg6IDIwMHB4O1xcbiAgbWFyZ2luOiAyMHB4IGF1dG87XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBiM2VlO1xcbiAgZm9udC1zaXplOiAyNHB4O1xcbiAgY29sb3I6IHdoaXRlOyB9XFxuXCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuIiwiaW1wb3J0ICdib290c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MnO1xyXG5pbXBvcnQgJy4vaW5kZXguc2Nzcyc7XHJcblxyXG5pbXBvcnQgJ2pxdWVyeS9kaXN0L2pxdWVyeS5taW4nO1xyXG5pbXBvcnQgJ2Jvb3RzdHJhcC9kaXN0L2pzL2Jvb3RzdHJhcC5taW4nO1xyXG5cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgYm9hcmQ6IFtdLFxyXG4gICAgICAgIHBsYXllcjogXCJcIixcclxuICAgICAgICBjb21wdXRlcjogXCJcIixcclxuICAgICAgICBzdGF0dXM6IFwiXCIsXHJcbiAgICAgICAgcG9pbnRBcnI6IFtcclxuICAgICAgICAgICAgWzkwLCA5MF0sXHJcbiAgICAgICAgICAgIFsyNTAsIDkwXSxcclxuICAgICAgICAgICAgWzQxMCwgOTBdLFxyXG4gICAgICAgICAgICBbOTAsIDI1MF0sXHJcbiAgICAgICAgICAgIFsyNTAsIDI1MF0sXHJcbiAgICAgICAgICAgIFs0MTAsIDI1MF0sXHJcbiAgICAgICAgICAgIFs5MCwgNDEwXSxcclxuICAgICAgICAgICAgWzI1MCwgNDEwXSxcclxuICAgICAgICAgICAgWzQxMCwgNDEwXVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdGltZUluczogbnVsbFxyXG4gICAgfTtcclxuXHJcbiAgICAkKFwibGlcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gXCJwbGF5ZXJcIikge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmF0dHIoXCJpZFwiKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuYm9hcmRbaW5kZXhdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9hcmRbaW5kZXhdID0gZGF0YS5wbGF5ZXI7XHJcbiAgICAgICAgICAgICAgICBkcmF3Qm9hcmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgd2luQXJyID0gaXNXaW4oKTtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5BcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcmF3TGluZSh3aW5BcnIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN0YXR1cyA9IFwiZmluaXNoXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0ZpbmlzaCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gXCJmaW5pc2hcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoaW5pdGlhbEJvYXJkLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnN0YXR1cyA9IFwiY29tcHV0ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY29tcHV0ZXJNb3ZlLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiI2J0bk9cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBkYXRhLnBsYXllciA9IFwiT1wiO1xyXG4gICAgICAgIGRhdGEuY29tcHV0ZXIgPSBcIlhcIjtcclxuICAgICAgICAkKFwiI215TW9kYWxcIikubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiNidG5YXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZGF0YS5wbGF5ZXIgPSBcIlhcIjtcclxuICAgICAgICBkYXRhLmNvbXB1dGVyID0gXCJPXCI7XHJcbiAgICAgICAgJChcIiNteU1vZGFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXB1dGVyTW92ZSgpIHtcclxuICAgICAgICB2YXIgbW92ZUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAvL+WmguaenOeUteiEkei1sOi/meS4gOatpeiDvei1ou+8jOWPlui/meS4gOatpVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgOTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmJvYXJkW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9hcmRbaV0gPSBkYXRhLmNvbXB1dGVyO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB3aW5BcnIgPSBpc1dpbigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbkFycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyYXdCb2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyYXdMaW5lKHdpbkFycik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSBcImZpbmlzaFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2FyZFtpXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/lpoLmnpznjqnlrrbotbDov5nkuIDmraXog73otaLvvIzlj5bov5nkuIDmraVcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDk7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5ib2FyZFtpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvYXJkW2ldID0gZGF0YS5wbGF5ZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNXaW4oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuYm9hcmRbaV0gPSBkYXRhLmNvbXB1dGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdmVGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2FyZFtpXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/nlLXohJHov57nu63otbDkuKTmraXvvIzlpoLmnpzmnInojrfog5zmlrnlvI/vvIzlj5bov5nkuIDmraVcclxuICAgICAgICBpZiAoIW1vdmVGbGFnKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgOTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5ib2FyZFtpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2FyZFtpXSA9IGRhdGEuY29tcHV0ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA5OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuYm9hcmRbal0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2FyZFtqXSA9IGRhdGEuY29tcHV0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNXaW4oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmJvYXJkW2pdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmJvYXJkW2ldID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+ayoeaciei+g+S8mOi1sOazle+8jOWFiOWPluS4remXtO+8jOWGjeWPluWbm+S4quinku+8jOacgOWQjuWPluWJqeS4i+eahFxyXG4gICAgICAgIGlmICghbW92ZUZsYWcpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuYm9hcmRbNF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5ib2FyZFs0XSA9IGRhdGEuY29tcHV0ZXI7XHJcbiAgICAgICAgICAgICAgICBtb3ZlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBhcnIgPSBbMCwgMiwgNiwgOF07XHJcblxyXG4gICAgICAgIGlmICghbW92ZUZsYWcpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmJvYXJkW2FycltpXV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuYm9hcmRbYXJyW2ldXSA9IGRhdGEuY29tcHV0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZUZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIW1vdmVGbGFnKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgOTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5ib2FyZFtpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5ib2FyZFtpXSA9IGRhdGEuY29tcHV0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZUZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkcmF3Qm9hcmQoKTtcclxuXHJcbiAgICAgICAgaWYgKGlzRmluaXNoKCkpIHtcclxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSBcImZpbmlzaFwiO1xyXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChpbml0aWFsQm9hcmQsIDEwMDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gXCJwbGF5ZXJcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNGaW5pc2goKSB7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDk7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5ib2FyZFtpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY291bnQgPT0gOSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc1dpbigpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvYXJkW2kgKiAzXSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvYXJkW2kgKiAzXSA9PSBkYXRhLmJvYXJkW2kgKiAzICsgMV0gJiZcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9hcmRbaSAqIDMgKyAxXSA9PSBkYXRhLmJvYXJkW2kgKiAzICsgMl1cclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2kgKiAzLCBpICogMyArIDJdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBkYXRhLmJvYXJkW2ldICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9hcmRbaV0gPT0gZGF0YS5ib2FyZFtpICsgM10gJiZcclxuICAgICAgICAgICAgICAgIGRhdGEuYm9hcmRbaSArIDNdID09IGRhdGEuYm9hcmRbaSArIDZdXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtpLCBpICsgNl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgZGF0YS5ib2FyZFswXSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGRhdGEuYm9hcmRbMF0gPT0gZGF0YS5ib2FyZFs0XSAmJlxyXG4gICAgICAgICAgICBkYXRhLmJvYXJkWzBdID09IGRhdGEuYm9hcmRbOF1cclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFswLCA4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgZGF0YS5ib2FyZFsyXSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGRhdGEuYm9hcmRbMl0gPT0gZGF0YS5ib2FyZFs0XSAmJlxyXG4gICAgICAgICAgICBkYXRhLmJvYXJkWzJdID09IGRhdGEuYm9hcmRbNl1cclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFs2LCAyXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmF3Qm9hcmQoKSB7XHJcbiAgICAgICAgdmFyIGxpc3QgPSAkKFwibGlcIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA5OyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuYm9hcmRbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgJChsaXN0W2ldKS50ZXh0KGRhdGEuYm9hcmRbaV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJChsaXN0W2ldKS50ZXh0KFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRyYXdMaW5lKGFycikge1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIHRvdGFsID0gNjtcclxuICAgICAgICAkKFwiI3dpbkNhbnZhc1wiKS5zaG93KCk7XHJcbiAgICAgICAgZGF0YS50aW1lSW5zID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgY2F2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aW5DYW52YXNcIik7XHJcbiAgICAgICAgICAgIHZhciBjeHQgPSBjYXYuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIFt4MSwgeTFdID0gZGF0YS5wb2ludEFyclthcnJbMF1dO1xyXG4gICAgICAgICAgICB2YXIgW3gyLCB5Ml0gPSBkYXRhLnBvaW50QXJyW2FyclsxXV07XHJcblxyXG4gICAgICAgICAgICB2YXIgYWRkID0gNDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoeDEgPT0geDIpIHtcclxuICAgICAgICAgICAgICAgIHkxIC09IGFkZDtcclxuICAgICAgICAgICAgICAgIHkyICs9IGFkZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHkxID09IHkyKSB7XHJcbiAgICAgICAgICAgICAgICB4MSAtPSBhZGQ7XHJcbiAgICAgICAgICAgICAgICB4MiArPSBhZGQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh4MSA8IHgyICYmIHkxIDwgeTIpIHtcclxuICAgICAgICAgICAgICAgIHgxIC09IGFkZDtcclxuICAgICAgICAgICAgICAgIHkxIC09IGFkZDtcclxuICAgICAgICAgICAgICAgIHgyICs9IGFkZDtcclxuICAgICAgICAgICAgICAgIHkyICs9IGFkZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHgxIDwgeDIgJiYgeTEgPiB5Mikge1xyXG4gICAgICAgICAgICAgICAgeDEgLT0gYWRkO1xyXG4gICAgICAgICAgICAgICAgeTEgKz0gYWRkO1xyXG4gICAgICAgICAgICAgICAgeDIgKz0gYWRkO1xyXG4gICAgICAgICAgICAgICAgeTIgLT0gYWRkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjeHQuY2xlYXJSZWN0KDAsIDAsIDUwMCwgNTAwKTtcclxuICAgICAgICAgICAgY3h0LnN0cm9rZVN0eWxlID0gXCIjZmY2MDAwXCI7XHJcbiAgICAgICAgICAgIGN4dC5saW5lV2lkdGggPSAzO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvdW50ICUgMiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY3h0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3h0Lm1vdmVUbyh4MSwgeTEpO1xyXG4gICAgICAgICAgICAgICAgY3h0LmxpbmVUbyh4MiwgeTIpO1xyXG4gICAgICAgICAgICAgICAgY3h0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3h0LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb3VudCsrO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvdW50ID49IHRvdGFsKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsQm9hcmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXRpYWxCb2FyZCgpIHtcclxuICAgICAgICBkYXRhLmJvYXJkID0gW107XHJcblxyXG4gICAgICAgIGlmIChkYXRhLnRpbWVJbnMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChkYXRhLnRpbWVJbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhLnRpbWVJbnMgPSBudWxsO1xyXG4gICAgICAgIGlmIChkYXRhLnBsYXllciA9PSBcIlhcIikge1xyXG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9IFwicGxheWVyXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSBcImNvbXB1dGVyXCI7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNvbXB1dGVyTW92ZSwgMTAwMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiI3dpbkNhbnZhc1wiKS5oaWRlKCk7XHJcblxyXG4gICAgICAgIGRyYXdCb2FyZCgpO1xyXG4gICAgfVxyXG5cclxuICAgICQoXCIjcm9sZVNlbGVjdFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChkYXRhLnRpbWVJbnMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChkYXRhLnRpbWVJbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIjbXlNb2RhbFwiKS5vbihcImhpZGRlbi5icy5tb2RhbFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpbml0aWFsQm9hcmQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIjbXlNb2RhbFwiKS5vbihcInNob3cuYnMubW9kYWxcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZGF0YS5zdGF0dXMgPSBcIm1vZGFsXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiI215TW9kYWxcIikubW9kYWwoe1xyXG4gICAgICAgIGJhY2tkcm9wOiBcInN0YXRpY1wiXHJcbiAgICB9KTtcclxuICAgIC8vJCgnI215TW9kYWwnKS5tb2RhbCgnc2hvdycpO1xyXG59KTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==