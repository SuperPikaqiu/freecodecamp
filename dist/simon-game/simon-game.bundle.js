!function(n){function t(t){for(var e,i,l=t[0],u=t[1],c=t[2],d=0,p=[];d<l.length;d++)i=l[d],r[i]&&p.push(r[i][0]),r[i]=0;for(e in u)Object.prototype.hasOwnProperty.call(u,e)&&(n[e]=u[e]);for(s&&s(t);p.length;)p.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var n,t=0;t<a.length;t++){for(var o=a[t],e=!0,l=1;l<o.length;l++){var u=o[l];0!==r[u]&&(e=!1)}e&&(a.splice(t--,1),n=i(i.s=o[0]))}return n}var e={},r={0:0},a=[];function i(t){if(e[t])return e[t].exports;var o=e[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=n,i.c=e,i.d=function(n,t,o){i.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:o})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,t){if(1&t&&(n=i(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var e in n)i.d(o,e,function(t){return n[t]}.bind(null,e));return o},i.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(t,"a",t),t},i.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var s=u;a.push([5,1]),o()}({27:function(n,t,o){var e=o(28);"string"==typeof e&&(e=[[n.i,e,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};o(2)(e,r);e.locals&&(n.exports=e.locals)},28:function(n,t,o){(n.exports=o(1)(!1)).push([n.i,'body {\n  background: url("http://cdn.backgroundhost.com/backgrounds/subtlepatterns/retina_wood.png"); }\n\n.box {\n  position: relative;\n  width: 500px;\n  height: 500px;\n  margin: 50px auto;\n  padding: 20px;\n  border-radius: 50%;\n  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.4);\n  background-color: #4b4b4b;\n  display: flex;\n  justify-content: space-between;\n  align-content: space-between;\n  flex-wrap: wrap; }\n  .box .colorBtn {\n    width: 220px;\n    height: 220px;\n    cursor: pointer;\n    opacity: 0.5; }\n\n#colorBtn1 {\n  border-top-left-radius: 100%;\n  background-color: #00d91f; }\n\n#colorBtn2 {\n  border-top-right-radius: 100%;\n  background-color: red; }\n\n#colorBtn3 {\n  border-bottom-left-radius: 100%;\n  background-color: #fff400; }\n\n#colorBtn4 {\n  border-bottom-right-radius: 100%;\n  background-color: blue; }\n\n.btnBox {\n  position: absolute;\n  left: 120px;\n  top: 120px;\n  width: 250px;\n  height: 250px;\n  background-color: #f3f3f3;\n  border: 15px solid #4b4b4b;\n  border-radius: 50%; }\n  .btnBox h2 {\n    text-align: center;\n    margin-top: 30px;\n    font-size: 50px; }\n    .btnBox h2 span {\n      font-weight: bold;\n      font-size: 16px;\n      vertical-align: top; }\n  .btnBox .middle {\n    margin-top: 15px;\n    display: flex;\n    justify-content: center;\n    align-items: center; }\n    .btnBox .middle span {\n      display: block;\n      text-align: center;\n      font-size: 10px; }\n\n.countGroup {\n  width: 60px;\n  height: 80px;\n  margin-right: 5px; }\n\n.startGroup {\n  width: 50px;\n  height: 80px;\n  margin-left: 5px;\n  margin-right: 5px; }\n\n.strictGroup {\n  width: 50px;\n  height: 80px;\n  margin-left: 5px; }\n\n#countPanel {\n  width: 60px;\n  height: 40px;\n  border-radius: 8px;\n  margin: 10px auto 5px auto;\n  background-color: #541911;\n  color: #a8002a;\n  font-size: 28px;\n  text-align: center;\n  line-height: 40px; }\n\n#btnStart {\n  display: block;\n  width: 30px;\n  height: 30px;\n  border: 4px solid #3f140e;\n  border-radius: 50%;\n  margin: 15px auto 10px auto;\n  background-color: #ff3100;\n  outline: 0; }\n\n#strictIcon {\n  width: 10px;\n  height: 10px;\n  margin: 0 auto 4px auto;\n  border-radius: 50%;\n  background-color: #541911; }\n\n.strictOn {\n  background-color: #ff0001 !important; }\n\n#btnStrict {\n  display: block;\n  width: 30px;\n  height: 30px;\n  border: 4px solid #3f140e;\n  border-radius: 50%;\n  margin: 5px auto 10px auto;\n  background-color: #eee700;\n  outline: 0; }\n\n.switchGroup {\n  padding-top: 5px;\n  text-align: center; }\n\n.modal-body {\n  text-align: right; }\n  .modal-body h1 {\n    text-align: center; }\n',""])},5:function(n,t,o){"use strict";(function(n){o(6),o(7),o(8),o(9),o(10),o(17),o(25),o(27),n(document).ready(function(){var t={status:"stop",count:0,strictFlag:!1,queue:[],timeHandle:null,timeOutHandle:null,animateEndHandle:null,startHandle:null,wrongHandle:null,step:0,currentIndex:null,maxCount:0,clickTarget:null};function o(){t.count<10?n("#countPanel").text("0"+t.count):n("#countPanel").text(t.count)}function e(){t.queue=[];for(var n=0;n<t.count;n++){var o=Math.floor(4*Math.random())+1;t.queue.push(o)}}function r(){t.step=0,t.status="animate",t.currentIndex=0,null!==t.timeHandle&&window.clearInterval(t.timeHandle),t.timeHandle=window.setInterval(a,2e3)}function a(){var o="#colorBtn"+t.queue[t.step];n(o).animate({opacity:1},1e3,function(){n("#sound3")[0].play()}),n(o).animate({opacity:.5},500),t.step++,t.step>=t.queue.length&&(window.clearInterval(t.timeHandle),t.timeHandle=null,t.animateEndHandle=window.setTimeout(function(){t.status="player",t.timeOutHandle=window.setTimeout(function(){l()},3e3*t.count)},2e3))}function i(){null!==t.timeHandle&&(window.clearInterval(t.timeHandle),t.timeHandle=null),null!==t.timeOutHandle&&(window.clearTimeout(t.timeOutHandle),t.timeOutHandle=null),null!==t.animateEndHandle&&(window.clearTimeout(t.animateEndHandle),t.animateEndHandle=null),null!==t.startHandle&&(window.clearTimeout(t.startHandle),t.startHandle=null),null!==t.wrongHandle&&(window.clearTimeout(t.wrongHandle),t.wrongHandle=null),n("#countPanel").stop(!0),n(".colorBtn").stop(!0),n("#colorBtn1").css("opacity","0.5"),n("#colorBtn2").css("opacity","0.5"),n("#colorBtn3").css("opacity","0.5"),n("#colorBtn4").css("opacity","0.5")}function l(){t.status="wrong",n("#sound1")[0].play(),t.strictFlag&&(t.count=1,e()),null!==t.timeOutHandle&&(window.clearTimeout(t.timeOutHandle),t.timeOutHandle=null),null!==t.clickTarget&&(n(t.clickTarget).css("opacity","0.5"),t.clickTarget=null),n("#countPanel").text("!!"),n("#countPanel").animate({color:"#820021"},500),n("#countPanel").animate({color:"#ff0037"},500,function(){t.wrongHandle=window.setTimeout(function(){o(),r()},500)})}n("#btnSwitch").bootstrapSwitch({onText:"ON",offText:"Off",onColor:"success",offColor:"danger",size:"mini",onSwitchChange:function(o,e){1==e?(t.status="initial",t.count=0,t.strictFlag=!1,t.queue=[],t.maxCount=15,t.step=0,t.currentIndex=0,n("#countPanel").text("- -"),n("#countPanel").css("color","#ff0037")):(i(),t.status="stop",n("#strictIcon").removeClass("strictOn"),n("#countPanel").text("- -"),n("#countPanel").css("color","#820021"))}}),n("#btnStart").on("click",function(){"stop"!=t.status&&(i(),t.status="start",t.count=1,o(),e(),t.startHandle=window.setTimeout(r,500))}),n("#btnStrict").on("click",function(){"stop"!=t.status&&(t.strictFlag=!t.strictFlag,t.strictFlag?n("#strictIcon").addClass("strictOn"):n("#strictIcon").removeClass("strictOn"))}),n(".colorBtn").on("click",function(){if("player"===t.status){var a=n(this).attr("data-index");(a=parseInt(a))===t.queue[t.currentIndex]?(t.currentIndex++,n("#sound3")[0].play(),t.currentIndex>=t.queue.length&&(t.count++,o(),null!==t.timeOutHandle&&(window.clearTimeout(t.timeOutHandle),t.timeOutHandle=null),t.count>=t.maxCount?(t.status="win",n("#myModal").modal("show")):(e(),r()))):l()}}),n(".colorBtn").on("mousedown",function(){"player"===t.status&&(t.clickTarget="#"+n(this).attr("id"),n(this).css("opacity","1"))}),n(".colorBtn").on("mouseup",function(){t.status}),window.onmouseup=function(){null!==t.clickTarget&&(n(t.clickTarget).css("opacity","0.5"),t.clickTarget=null)},n("#btnClose").on("click",function(){n("#myModal").modal("hide")})})}).call(this,o(0))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcHJvamVjdC9zaW1vbi1nYW1lL2luZGV4LnNjc3M/YjA3NiIsIndlYnBhY2s6Ly8vLi9wcm9qZWN0L3NpbW9uLWdhbWUvaW5kZXguc2NzcyIsIndlYnBhY2s6Ly8vLi9wcm9qZWN0L3NpbW9uLWdhbWUvaW5kZXguanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIwIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJjb250ZW50Iiwib3B0aW9ucyIsImhtciIsInRyYW5zZm9ybSIsImluc2VydEludG8iLCJ1bmRlZmluZWQiLCJsb2NhbHMiLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsInN0YXR1cyIsImNvdW50Iiwic3RyaWN0RmxhZyIsInF1ZXVlIiwidGltZUhhbmRsZSIsInRpbWVPdXRIYW5kbGUiLCJhbmltYXRlRW5kSGFuZGxlIiwic3RhcnRIYW5kbGUiLCJ3cm9uZ0hhbmRsZSIsInN0ZXAiLCJjdXJyZW50SW5kZXgiLCJtYXhDb3VudCIsImNsaWNrVGFyZ2V0Iiwic2hvd0NvdW50IiwidGV4dCIsImdlbmVyYXRlUXVldWUiLCJpZCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInN0YXJ0QW5pbWF0ZSIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIkFuaW1hdGVRdWV1ZSIsImFuaW1hdGUiLCJvcGFjaXR5IiwicGxheSIsInNldFRpbWVvdXQiLCJjbGlja1dyb25nIiwiY2xlYXJEYXRhIiwiY2xlYXJUaW1lb3V0Iiwic3RvcCIsImNzcyIsImNvbG9yIiwiYm9vdHN0cmFwU3dpdGNoIiwib25UZXh0Iiwib2ZmVGV4dCIsIm9uQ29sb3IiLCJvZmZDb2xvciIsInNpemUiLCJvblN3aXRjaENoYW5nZSIsImUiLCJyZW1vdmVDbGFzcyIsIm9uIiwiYWRkQ2xhc3MiLCJ2YWwiLCJ0aGlzIiwiYXR0ciIsInBhcnNlSW50IiwibW9kYWwiLCJvbm1vdXNldXAiXSwibWFwcGluZ3MiOiJhQUNBLFNBQUFBLEVBQUFDLEdBUUEsSUFQQSxJQU1BQyxFQUFBQyxFQU5BQyxFQUFBSCxFQUFBLEdBQ0FJLEVBQUFKLEVBQUEsR0FDQUssRUFBQUwsRUFBQSxHQUlBTSxFQUFBLEVBQUFDLEtBQ1FELEVBQUFILEVBQUFLLE9BQW9CRixJQUM1QkosRUFBQUMsRUFBQUcsR0FDQUcsRUFBQVAsSUFDQUssRUFBQUcsS0FBQUQsRUFBQVAsR0FBQSxJQUVBTyxFQUFBUCxHQUFBLEVBRUEsSUFBQUQsS0FBQUcsRUFDQU8sT0FBQUMsVUFBQUMsZUFBQUMsS0FBQVYsRUFBQUgsS0FDQWMsRUFBQWQsR0FBQUcsRUFBQUgsSUFLQSxJQUZBZSxL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QUswRSxZQUFjMUUsRUFBSzBFLFdBQ3BCMUUsRUFBSzBFLFdBQ0xMLEVBQUUsZUFBZStDLFNBQVMsWUFFMUIvQyxFQUFFLGVBQWU2QyxZQUFZLGVBS3pDN0MsRUFBRSxhQUFhOEMsR0FBRyxRQUFTLFdBQ3ZCLEdBQW9CLFdBQWhCbkgsRUFBS3dFLE9BQVQsQ0FJQSxJQUFJNkMsRUFBTWhELEVBQUVpRCxNQUFNQyxLQUFLLGVBQ3ZCRixFQUFNRyxTQUFTSCxNQUVIckgsRUFBSzJFLE1BQU0zRSxFQUFLa0YsZUFDeEJsRixFQUFLa0YsZUFDTGIsRUFBRSxXQUFXLEdBQUc2QixPQUNabEcsRUFBS2tGLGNBQWdCbEYsRUFBSzJFLE1BQU1uRSxTQUNoQ1IsRUFBS3lFLFFBQ0xZLElBRTJCLE9BQXZCckYsRUFBSzZFLGdCQUNMbEIsT0FBTzJDLGFBQWF0RyxFQUFLNkUsZUFDekI3RSxFQUFLNkUsY0FBZ0IsTUFHckI3RSxFQUFLeUUsT0FBU3pFLEVBQUttRixVQUNuQm5GLEVBQUt3RSxPQUFTLE1BdUMxQkgsRUFBRSxZQUFZb0QsTUFBTSxVQW5DUmxDLElBQ0FLLE9BS1JRLE9BSVIvQixFQUFFLGFBQWE4QyxHQUFHLFlBQWEsV0FDUCxXQUFoQm5ILEVBQUt3RSxTQUlUeEUsRUFBS29GLFlBQWMsSUFBTWYsRUFBRWlELE1BQU1DLEtBQUssTUFDdENsRCxFQUFFaUQsTUFBTWQsSUFBSSxVQUFXLFFBRzNCbkMsRUFBRSxhQUFhOEMsR0FBRyxVQUFXLFdBQ3JCbkgsRUFBS3dFLFNBT2JiLE9BQU8rRCxVQUFZLFdBQ1UsT0FBckIxSCxFQUFLb0YsY0FDTGYsRUFBRXJFLEVBQUtvRixhQUFhb0IsSUFBSSxVQUFXLE9BQ25DeEcsRUFBS29GLFlBQWMsT0FrRjNCZixFQUFFLGFBQWE4QyxHQUFHLFFBQVMsV0FDdkI5QyxFQUFFLFlBQVlvRCxNQUFNIiwiZmlsZSI6InNpbW9uLWdhbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG4gXHRcdHZhciBleGVjdXRlTW9kdWxlcyA9IGRhdGFbMl07XG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG5cbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdFx0Ly8gYWRkIGVudHJ5IG1vZHVsZXMgZnJvbSBsb2FkZWQgY2h1bmsgdG8gZGVmZXJyZWQgbGlzdFxuIFx0XHRkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsIGV4ZWN1dGVNb2R1bGVzIHx8IFtdKTtcblxuIFx0XHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIGFsbCBjaHVua3MgcmVhZHlcbiBcdFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4gXHR9O1xuIFx0ZnVuY3Rpb24gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKSB7XG4gXHRcdHZhciByZXN1bHQ7XG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgZGVmZXJyZWRNb2R1bGUgPSBkZWZlcnJlZE1vZHVsZXNbaV07XG4gXHRcdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG4gXHRcdFx0Zm9yKHZhciBqID0gMTsgaiA8IGRlZmVycmVkTW9kdWxlLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgZGVwSWQgPSBkZWZlcnJlZE1vZHVsZVtqXTtcbiBcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tkZXBJZF0gIT09IDApIGZ1bGZpbGxlZCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZihmdWxmaWxsZWQpIHtcbiBcdFx0XHRcdGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLCAxKTtcbiBcdFx0XHRcdHJlc3VsdCA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gZGVmZXJyZWRNb2R1bGVbMF0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MDogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbNSwxXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL2luZGV4LnNjc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vaW5kZXguc2Nzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vaW5kZXguc2Nzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiYm9keSB7XFxuICBiYWNrZ3JvdW5kOiB1cmwoXFxcImh0dHA6Ly9jZG4uYmFja2dyb3VuZGhvc3QuY29tL2JhY2tncm91bmRzL3N1YnRsZXBhdHRlcm5zL3JldGluYV93b29kLnBuZ1xcXCIpOyB9XFxuXFxuLmJveCB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICB3aWR0aDogNTAwcHg7XFxuICBoZWlnaHQ6IDUwMHB4O1xcbiAgbWFyZ2luOiA1MHB4IGF1dG87XFxuICBwYWRkaW5nOiAyMHB4O1xcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgYm94LXNoYWRvdzogMCAwIDJweCAwIHJnYmEoMCwgMCwgMCwgMC40KTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM0YjRiNGI7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgYWxpZ24tY29udGVudDogc3BhY2UtYmV0d2VlbjtcXG4gIGZsZXgtd3JhcDogd3JhcDsgfVxcbiAgLmJveCAuY29sb3JCdG4ge1xcbiAgICB3aWR0aDogMjIwcHg7XFxuICAgIGhlaWdodDogMjIwcHg7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgb3BhY2l0eTogMC41OyB9XFxuXFxuI2NvbG9yQnRuMSB7XFxuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAxMDAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwZDkxZjsgfVxcblxcbiNjb2xvckJ0bjIge1xcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDEwMCU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7IH1cXG5cXG4jY29sb3JCdG4zIHtcXG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDEwMCU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmNDAwOyB9XFxuXFxuI2NvbG9yQnRuNCB7XFxuICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6IGJsdWU7IH1cXG5cXG4uYnRuQm94IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDEyMHB4O1xcbiAgdG9wOiAxMjBweDtcXG4gIHdpZHRoOiAyNTBweDtcXG4gIGhlaWdodDogMjUwcHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjNmM2YzO1xcbiAgYm9yZGVyOiAxNXB4IHNvbGlkICM0YjRiNGI7XFxuICBib3JkZXItcmFkaXVzOiA1MCU7IH1cXG4gIC5idG5Cb3ggaDIge1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICAgIG1hcmdpbi10b3A6IDMwcHg7XFxuICAgIGZvbnQtc2l6ZTogNTBweDsgfVxcbiAgICAuYnRuQm94IGgyIHNwYW4ge1xcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcXG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB9XFxuICAuYnRuQm94IC5taWRkbGUge1xcbiAgICBtYXJnaW4tdG9wOiAxNXB4O1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgfVxcbiAgICAuYnRuQm94IC5taWRkbGUgc3BhbiB7XFxuICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICAgIGZvbnQtc2l6ZTogMTBweDsgfVxcblxcbi5jb3VudEdyb3VwIHtcXG4gIHdpZHRoOiA2MHB4O1xcbiAgaGVpZ2h0OiA4MHB4O1xcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7IH1cXG5cXG4uc3RhcnRHcm91cCB7XFxuICB3aWR0aDogNTBweDtcXG4gIGhlaWdodDogODBweDtcXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XFxuICBtYXJnaW4tcmlnaHQ6IDVweDsgfVxcblxcbi5zdHJpY3RHcm91cCB7XFxuICB3aWR0aDogNTBweDtcXG4gIGhlaWdodDogODBweDtcXG4gIG1hcmdpbi1sZWZ0OiA1cHg7IH1cXG5cXG4jY291bnRQYW5lbCB7XFxuICB3aWR0aDogNjBweDtcXG4gIGhlaWdodDogNDBweDtcXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcXG4gIG1hcmdpbjogMTBweCBhdXRvIDVweCBhdXRvO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU0MTkxMTtcXG4gIGNvbG9yOiAjYTgwMDJhO1xcbiAgZm9udC1zaXplOiAyOHB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgbGluZS1oZWlnaHQ6IDQwcHg7IH1cXG5cXG4jYnRuU3RhcnQge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICB3aWR0aDogMzBweDtcXG4gIGhlaWdodDogMzBweDtcXG4gIGJvcmRlcjogNHB4IHNvbGlkICMzZjE0MGU7XFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxuICBtYXJnaW46IDE1cHggYXV0byAxMHB4IGF1dG87XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYzMTAwO1xcbiAgb3V0bGluZTogMDsgfVxcblxcbiNzdHJpY3RJY29uIHtcXG4gIHdpZHRoOiAxMHB4O1xcbiAgaGVpZ2h0OiAxMHB4O1xcbiAgbWFyZ2luOiAwIGF1dG8gNHB4IGF1dG87XFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTQxOTExOyB9XFxuXFxuLnN0cmljdE9uIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZjAwMDEgIWltcG9ydGFudDsgfVxcblxcbiNidG5TdHJpY3Qge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICB3aWR0aDogMzBweDtcXG4gIGhlaWdodDogMzBweDtcXG4gIGJvcmRlcjogNHB4IHNvbGlkICMzZjE0MGU7XFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxuICBtYXJnaW46IDVweCBhdXRvIDEwcHggYXV0bztcXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU3MDA7XFxuICBvdXRsaW5lOiAwOyB9XFxuXFxuLnN3aXRjaEdyb3VwIHtcXG4gIHBhZGRpbmctdG9wOiA1cHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cXG5cXG4ubW9kYWwtYm9keSB7XFxuICB0ZXh0LWFsaWduOiByaWdodDsgfVxcbiAgLm1vZGFsLWJvZHkgaDEge1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cXG5cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCJpbXBvcnQgJ2pxdWVyeS9kaXN0L2pxdWVyeS5taW4nO1xyXG5pbXBvcnQgJ2pxdWVyeXVpL2pxdWVyeS11aS5taW4nO1xyXG5pbXBvcnQgJ2Jvb3RzdHJhcC9kaXN0L2pzL2Jvb3RzdHJhcC5taW4nO1xyXG5pbXBvcnQgJ2Jvb3RzdHJhcC1zd2l0Y2gvZGlzdC9qcy9ib290c3RyYXAtc3dpdGNoLm1pbic7XHJcbmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzJztcclxuaW1wb3J0ICdmb250LWF3ZXNvbWUvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzJztcclxuaW1wb3J0ICdib290c3RyYXAtc3dpdGNoL2Rpc3QvY3NzL2Jvb3RzdHJhcDMvYm9vdHN0cmFwLXN3aXRjaC5taW4uY3NzJztcclxuaW1wb3J0ICcuL2luZGV4LnNjc3MnO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgc3RhdHVzOiAnc3RvcCcsXHJcbiAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgc3RyaWN0RmxhZzogZmFsc2UsXHJcbiAgICAgICAgcXVldWU6IFtdLFxyXG4gICAgICAgIHRpbWVIYW5kbGU6IG51bGwsXHJcbiAgICAgICAgdGltZU91dEhhbmRsZTogbnVsbCxcclxuICAgICAgICBhbmltYXRlRW5kSGFuZGxlOiBudWxsLFxyXG4gICAgICAgIHN0YXJ0SGFuZGxlOiBudWxsLFxyXG4gICAgICAgIHdyb25nSGFuZGxlOiBudWxsLFxyXG4gICAgICAgIHN0ZXA6IDAsLy/liqjnlLvmkq3mlL7pobrluo9cclxuICAgICAgICBjdXJyZW50SW5kZXg6IG51bGwsIC8v5b2T5YmN54K55Ye76aG65bqPXHJcbiAgICAgICAgbWF4Q291bnQ6IDAsXHJcbiAgICAgICAgY2xpY2tUYXJnZXQ6IG51bGxcclxuICAgIH07XHJcblxyXG4gICAgJCgnI2J0blN3aXRjaCcpLmJvb3RzdHJhcFN3aXRjaCh7XHJcbiAgICAgICAgb25UZXh0OiAnT04nLFxyXG4gICAgICAgIG9mZlRleHQ6ICdPZmYnLFxyXG4gICAgICAgIG9uQ29sb3I6ICdzdWNjZXNzJyxcclxuICAgICAgICBvZmZDb2xvcjogJ2RhbmdlcicsXHJcbiAgICAgICAgc2l6ZTogJ21pbmknLFxyXG4gICAgICAgIG9uU3dpdGNoQ2hhbmdlKGUsIHN0YXR1cykge1xyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGluaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjY291bnRQYW5lbCcpLnRleHQoJy0gLScpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2NvdW50UGFuZWwnKS5jc3MoJ2NvbG9yJywgJyNmZjAwMzcnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3RvcCc7XHJcbiAgICAgICAgICAgICAgICAkKCcjc3RyaWN0SWNvbicpLnJlbW92ZUNsYXNzKCdzdHJpY3RPbicpO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJyNjb3VudFBhbmVsJykudGV4dCgnLSAtJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjY291bnRQYW5lbCcpLmNzcygnY29sb3InLCAnIzgyMDAyMScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0NvdW50KCkge1xyXG4gICAgICAgIGlmIChkYXRhLmNvdW50IDwgMTApIHtcclxuICAgICAgICAgICAgJCgnI2NvdW50UGFuZWwnKS50ZXh0KCcwJyArIGRhdGEuY291bnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyNjb3VudFBhbmVsJykudGV4dChkYXRhLmNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVRdWV1ZSgpIHtcclxuICAgICAgICBkYXRhLnF1ZXVlID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCkgKyAxO1xyXG4gICAgICAgICAgICBkYXRhLnF1ZXVlLnB1c2goaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzdGFydEFuaW1hdGUoKSB7XHJcbiAgICAgICAgZGF0YS5zdGVwID0gMDtcclxuICAgICAgICBkYXRhLnN0YXR1cyA9ICdhbmltYXRlJztcclxuICAgICAgICBkYXRhLmN1cnJlbnRJbmRleCA9IDA7XHJcblxyXG4gICAgICAgIGlmIChkYXRhLnRpbWVIYW5kbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoZGF0YS50aW1lSGFuZGxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGEudGltZUhhbmRsZSA9IHdpbmRvdy5zZXRJbnRlcnZhbChBbmltYXRlUXVldWUsIDIwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIEFuaW1hdGVRdWV1ZSgpIHtcclxuICAgICAgICB2YXIgaWQgPSAnI2NvbG9yQnRuJyArIGRhdGEucXVldWVbZGF0YS5zdGVwXTtcclxuXHJcbiAgICAgICAgJChpZCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LCAxMDAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNzb3VuZDMnKVswXS5wbGF5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChpZCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuNVxyXG4gICAgICAgIH0sIDUwMCk7XHJcblxyXG4gICAgICAgIGRhdGEuc3RlcCsrO1xyXG4gICAgICAgIGlmIChkYXRhLnN0ZXAgPj0gZGF0YS5xdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoZGF0YS50aW1lSGFuZGxlKTtcclxuICAgICAgICAgICAgZGF0YS50aW1lSGFuZGxlID0gbnVsbDtcclxuICAgICAgICAgICAgZGF0YS5hbmltYXRlRW5kSGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAncGxheWVyJztcclxuICAgICAgICAgICAgICAgIGRhdGEudGltZU91dEhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGlja1dyb25nKCk7XHJcbiAgICAgICAgICAgICAgICB9LCBkYXRhLmNvdW50ICogMzAwMCk7XHJcbiAgICAgICAgICAgIH0sIDIwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAkKCcjYnRuU3RhcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuc3RhdHVzICE9ICdzdG9wJykge1xyXG4gICAgICAgICAgICBjbGVhckRhdGEoKTtcclxuICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnc3RhcnQnO1xyXG4gICAgICAgICAgICBkYXRhLmNvdW50ID0gMTtcclxuXHJcblxyXG4gICAgICAgICAgICBzaG93Q291bnQoKTtcclxuICAgICAgICAgICAgZ2VuZXJhdGVRdWV1ZSgpO1xyXG4gICAgICAgICAgICBkYXRhLnN0YXJ0SGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoc3RhcnRBbmltYXRlLCA1MDApOyAvL+eCueWHu+W8gOWni+acieS4gOS4qjAuNeenkueahOW7tui/n1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNidG5TdHJpY3QnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuc3RhdHVzICE9ICdzdG9wJykge1xyXG4gICAgICAgICAgICBkYXRhLnN0cmljdEZsYWcgPSAhZGF0YS5zdHJpY3RGbGFnO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zdHJpY3RGbGFnKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjc3RyaWN0SWNvbicpLmFkZENsYXNzKCdzdHJpY3RPbicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI3N0cmljdEljb24nKS5yZW1vdmVDbGFzcygnc3RyaWN0T24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5jb2xvckJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoZGF0YS5zdGF0dXMgIT09ICdwbGF5ZXInKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2YWwgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtaW5kZXgnKTtcclxuICAgICAgICB2YWwgPSBwYXJzZUludCh2YWwpO1xyXG5cclxuICAgICAgICBpZiAodmFsID09PSBkYXRhLnF1ZXVlW2RhdGEuY3VycmVudEluZGV4XSkge1xyXG4gICAgICAgICAgICBkYXRhLmN1cnJlbnRJbmRleCsrO1xyXG4gICAgICAgICAgICAkKCcjc291bmQzJylbMF0ucGxheSgpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5jdXJyZW50SW5kZXggPj0gZGF0YS5xdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuY291bnQrKztcclxuICAgICAgICAgICAgICAgIHNob3dDb3VudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnRpbWVPdXRIYW5kbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGRhdGEudGltZU91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS50aW1lT3V0SGFuZGxlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb3VudCA+PSBkYXRhLm1heENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnd2luJztcclxuICAgICAgICAgICAgICAgICAgICBzaG93V2luKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZVF1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRBbmltYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNsaWNrV3JvbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuY29sb3JCdG4nKS5vbignbW91c2Vkb3duJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChkYXRhLnN0YXR1cyAhPT0gJ3BsYXllcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YS5jbGlja1RhcmdldCA9ICcjJyArICQodGhpcykuYXR0cignaWQnKTtcclxuICAgICAgICAkKHRoaXMpLmNzcygnb3BhY2l0eScsICcxJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuY29sb3JCdG4nKS5vbignbW91c2V1cCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoZGF0YS5zdGF0dXMgIT09ICdwbGF5ZXInKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vJCh0aGlzKS5jc3MoJ29wYWNpdHknLCcwLjUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuY2xpY2tUYXJnZXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgJChkYXRhLmNsaWNrVGFyZ2V0KS5jc3MoJ29wYWNpdHknLCAnMC41Jyk7XHJcbiAgICAgICAgICAgIGRhdGEuY2xpY2tUYXJnZXQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1dpbigpIHtcclxuICAgICAgICAkKCcjbXlNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdERhdGEoKSB7XHJcbiAgICAgICAgZGF0YS5zdGF0dXMgPSAnaW5pdGlhbCc7XHJcbiAgICAgICAgZGF0YS5jb3VudCA9IDA7XHJcbiAgICAgICAgZGF0YS5zdHJpY3RGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgZGF0YS5xdWV1ZSA9IFtdO1xyXG4gICAgICAgIGRhdGEubWF4Q291bnQgPSAxNTtcclxuICAgICAgICBkYXRhLnN0ZXAgPSAwO1xyXG4gICAgICAgIGRhdGEuY3VycmVudEluZGV4ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbGVhckRhdGEoKSB7XHJcbiAgICAgICAgaWYgKGRhdGEudGltZUhhbmRsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChkYXRhLnRpbWVIYW5kbGUpO1xyXG4gICAgICAgICAgICBkYXRhLnRpbWVIYW5kbGUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRhdGEudGltZU91dEhhbmRsZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGRhdGEudGltZU91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgIGRhdGEudGltZU91dEhhbmRsZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS5hbmltYXRlRW5kSGFuZGxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoZGF0YS5hbmltYXRlRW5kSGFuZGxlKTtcclxuICAgICAgICAgICAgZGF0YS5hbmltYXRlRW5kSGFuZGxlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhLnN0YXJ0SGFuZGxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoZGF0YS5zdGFydEhhbmRsZSk7XHJcbiAgICAgICAgICAgIGRhdGEuc3RhcnRIYW5kbGUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRhdGEud3JvbmdIYW5kbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChkYXRhLndyb25nSGFuZGxlKTtcclxuICAgICAgICAgICAgZGF0YS53cm9uZ0hhbmRsZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcjY291bnRQYW5lbCcpLnN0b3AodHJ1ZSk7XHJcbiAgICAgICAgJCgnLmNvbG9yQnRuJykuc3RvcCh0cnVlKTtcclxuXHJcbiAgICAgICAgJCgnI2NvbG9yQnRuMScpLmNzcygnb3BhY2l0eScsICcwLjUnKTtcclxuICAgICAgICAkKCcjY29sb3JCdG4yJykuY3NzKCdvcGFjaXR5JywgJzAuNScpO1xyXG4gICAgICAgICQoJyNjb2xvckJ0bjMnKS5jc3MoJ29wYWNpdHknLCAnMC41Jyk7XHJcbiAgICAgICAgJCgnI2NvbG9yQnRuNCcpLmNzcygnb3BhY2l0eScsICcwLjUnKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY2xpY2tXcm9uZygpIHtcclxuICAgICAgICBkYXRhLnN0YXR1cyA9ICd3cm9uZyc7XHJcbiAgICAgICAgJCgnI3NvdW5kMScpWzBdLnBsYXkoKTtcclxuICAgICAgICBpZiAoZGF0YS5zdHJpY3RGbGFnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuY291bnQgPSAxO1xyXG4gICAgICAgICAgICBnZW5lcmF0ZVF1ZXVlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS50aW1lT3V0SGFuZGxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoZGF0YS50aW1lT3V0SGFuZGxlKTtcclxuICAgICAgICAgICAgZGF0YS50aW1lT3V0SGFuZGxlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhLmNsaWNrVGFyZ2V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICQoZGF0YS5jbGlja1RhcmdldCkuY3NzKCdvcGFjaXR5JywgJzAuNScpO1xyXG4gICAgICAgICAgICBkYXRhLmNsaWNrVGFyZ2V0ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJyNjb3VudFBhbmVsJykudGV4dCgnISEnKTtcclxuICAgICAgICAkKCcjY291bnRQYW5lbCcpLmFuaW1hdGUoe2NvbG9yOiAnIzgyMDAyMSd9LCA1MDApO1xyXG4gICAgICAgICQoJyNjb3VudFBhbmVsJykuYW5pbWF0ZSh7Y29sb3I6ICcjZmYwMDM3J30sIDUwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkYXRhLndyb25nSGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2hvd0NvdW50KCk7XHJcbiAgICAgICAgICAgICAgICBzdGFydEFuaW1hdGUoKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkKCcjYnRuQ2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI215TW9kYWwnKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=